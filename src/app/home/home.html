<!-- Search Bar -->
<div class="flex items-center bg-neutral-0 dark:bg-neutral-800 rounded-2xl shadow-lg px-4 py-2 mb-6">
  <svg class="mr-4 shrink-0" width="25" height="24" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M10.609 0c5.85 0 10.608 4.746 10.608 10.58 0 2.609-.952 5-2.527 6.847l5.112 5.087a.87.87 0 0 1-1.227 1.233l-5.118-5.093a10.58 10.58 0 0 1-6.848 2.505C4.759 21.16 0 16.413 0 10.58 0 4.747 4.76 0 10.609 0Zm0 1.74c-4.891 0-8.87 3.965-8.87 8.84 0 4.874 3.979 8.84 8.87 8.84a8.855 8.855 0 0 0 6.162-2.498l.007-.007a.87.87 0 0 1 .14-.112A8.787 8.787 0 0 0 19.478 10.58c0-4.875-3.978-8.84-8.87-8.84Z"
      fill="#0079FF"
    />
  </svg>
  <input
    class="flex-1 bg-transparent border-none outline-none text-[18px] text-neutral-700 dark:text-neutral-0 placeholder:text-neutral-500 caret-blue-500"
    type="text"
    placeholder="Search GitHub usernameâ€¦"
    [value]="username()"
    (input)="username.set($any($event.target).value)"
    (keydown.enter)="search()"
  />
  @if (error()) {
    <span class="text-red-500 font-bold text-[15px] mr-4 whitespace-nowrap">{{ error() }}</span>
  }
  <button
    (click)="search()"
    class="bg-blue-500 hover:bg-blue-300 text-neutral-0 font-bold text-[16px] rounded-xl px-6 py-3 cursor-pointer border-none transition-colors"
  >
    Search
  </button>
</div>

<!-- Error Card -->
@if (error() && !user()) {
  <div class="bg-neutral-0 dark:bg-neutral-800 rounded-2xl shadow-lg p-10 text-center">
    <h2 class="text-[22px] font-bold text-neutral-700 dark:text-neutral-0 mb-2">No results found!</h2>
    <p class="text-neutral-300 dark:text-neutral-400 text-[15px]">
      We couldn't find any GitHub users matching your search. Please double-check the username and try again.
    </p>
  </div>
}

<!-- Profile Card -->
@if (user(); as u) {
  <div class="bg-neutral-0 dark:bg-neutral-800 rounded-2xl shadow-lg p-6 md:p-12">
    <!-- Mobile: avatar + info row -->
    <div class="flex items-center gap-5 mb-6 md:hidden">
      <img
        [src]="u.avatar_url"
        [alt]="u.login"
        class="w-[70px] h-[70px] rounded-full shrink-0"
      />
      <div>
        <h2 class="text-[16px] font-bold text-neutral-700 dark:text-neutral-0">
          {{ u.name || u.login }}
        </h2>
        <a
          [href]="u.html_url"
          target="_blank"
          class="text-blue-500 text-[13px] no-underline hover:underline"
        >
          &#64;{{ u.login }}
        </a>
        <p class="text-neutral-300 dark:text-neutral-0 text-[13px] mt-1">
          Joined {{ u.created_at | date: 'd MMM yyyy' }}
        </p>
      </div>
    </div>

    <!-- Desktop: avatar + content side by side -->
    <div class="hidden md:flex gap-9">
      <img
        [src]="u.avatar_url"
        [alt]="u.login"
        class="w-[117px] h-[117px] rounded-full shrink-0"
      />
      <div class="flex-1">
        <div class="flex flex-wrap items-start justify-between mb-1">
          <div>
            <h2 class="text-[26px] font-bold text-neutral-700 dark:text-neutral-0">
              {{ u.name || u.login }}
            </h2>
            <a
              [href]="u.html_url"
              target="_blank"
              class="text-blue-500 text-[16px] no-underline hover:underline"
            >
              &#64;{{ u.login }}
            </a>
          </div>
          <p class="text-neutral-300 dark:text-neutral-0 text-[15px] mt-2">
            Joined {{ u.created_at | date: 'd MMM yyyy' }}
          </p>
        </div>

        <!-- Bio (desktop) -->
        <p class="text-neutral-500 dark:text-neutral-0 text-[15px] mt-5 leading-[25px]"
          [class.opacity-50]="!u.bio"
        >
          {{ u.bio || 'This profile has no bio' }}
        </p>

        <!-- Stats (desktop) -->
        <div class="flex bg-neutral-100 dark:bg-neutral-900 rounded-xl mt-8 py-4 px-8 justify-around text-center">
          <div>
            <p class="text-neutral-500 dark:text-neutral-0 text-[13px]">Repos</p>
            <p class="text-neutral-700 dark:text-neutral-0 text-[22px] font-bold">{{ u.public_repos }}</p>
          </div>
          <div>
            <p class="text-neutral-500 dark:text-neutral-0 text-[13px]">Followers</p>
            <p class="text-neutral-700 dark:text-neutral-0 text-[22px] font-bold">{{ u.followers }}</p>
          </div>
          <div>
            <p class="text-neutral-500 dark:text-neutral-0 text-[13px]">Following</p>
            <p class="text-neutral-700 dark:text-neutral-0 text-[22px] font-bold">{{ u.following }}</p>
          </div>
        </div>

        <!-- Links (desktop) -->
        <div class="grid grid-cols-2 gap-y-4 gap-x-6 mt-8 text-[15px]">
          <!-- Location -->
          <div class="flex items-center gap-3" [class.opacity-50]="!u.location">
            <svg width="14" height="20" xmlns="http://www.w3.org/2000/svg" class="shrink-0">
              <path d="M7.731.343a4.748 4.748 0 0 0-3.945 2.049 4.91 4.91 0 0 0-.588 4.39L6.884 15.9a.881.881 0 0 0 1.57 0l3.685-9.119a4.91 4.91 0 0 0-.588-4.39A4.748 4.748 0 0 0 7.731.344ZM7.67 8.559a2.09 2.09 0 1 1 0-4.18 2.09 2.09 0 0 1 0 4.18Z" fill="currentColor" class="text-neutral-500 dark:text-neutral-0" />
            </svg>
            <span class="text-neutral-500 dark:text-neutral-0">{{ u.location || 'Not Available' }}</span>
          </div>
          <!-- Twitter -->
          <div class="flex items-center gap-3" [class.opacity-50]="!u.twitter_username">
            <svg width="20" height="18" xmlns="http://www.w3.org/2000/svg" class="shrink-0">
              <path d="M20 2.799a8.549 8.549 0 0 1-2.363.647 4.077 4.077 0 0 0 1.804-2.266 8.194 8.194 0 0 1-2.6.993A4.099 4.099 0 0 0 9.75 4.977c0 .324.027.637.095.934-3.409-.166-6.425-1.8-8.452-4.288a4.128 4.128 0 0 0-.56 2.072c0 1.42.737 2.679 1.838 3.407a4.05 4.05 0 0 1-1.857-.509v.046a4.119 4.119 0 0 0 3.285 4.028 4.092 4.092 0 0 1-1.075.135c-.263 0-.528-.015-.776-.07.531 1.624 2.038 2.818 3.831 2.857A8.239 8.239 0 0 1 0 15.86a11.463 11.463 0 0 0 6.29 1.846c7.545 0 11.67-6.25 11.67-11.667 0-.182-.006-.357-.015-.53A8.18 8.18 0 0 0 20 3.369l-.003-.57h.003Z" fill="currentColor" class="text-neutral-500 dark:text-neutral-0" />
            </svg>
            <span class="text-neutral-500 dark:text-neutral-0">{{ u.twitter_username || 'Not Available' }}</span>
          </div>
          <!-- Blog -->
          <div class="flex items-center gap-3" [class.opacity-50]="!u.blog">
            <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" class="shrink-0">
              <g fill="currentColor" class="text-neutral-500 dark:text-neutral-0">
                <path d="M7.404 5.012c-2.355 2.437-1.841 6.482.857 8.273.089.06.207.048.283-.027.568-.555 1.049-1.093 1.47-1.776a.213.213 0 0 0-.084-.3A2.743 2.743 0 0 1 8.878 10.1a2.64 2.64 0 0 1-.223-1.803c.168-.638.57-1.163 1.078-1.56.348-.272.752-.468 1.158-.597.893-.271 1.325-.065 1.879.283.288.18.621.257.932.122l2.696-1.174a.233.233 0 0 0 .076-.382c-1.5-1.478-3.534-2.27-5.674-1.976-1.27.178-2.502.718-3.396 1.7Z" />
                <path d="M12.596 14.988c2.355-2.437 1.841-6.482-.857-8.273a.212.212 0 0 0-.283.027c-.568.555-1.049 1.093-1.47 1.776a.213.213 0 0 0 .084.3 2.74 2.74 0 0 1 1.052 1.082c.26.463.345.992.223 1.803-.168.638-.57 1.163-1.078 1.56a3.34 3.34 0 0 1-1.158.597c-.893.271-1.325.065-1.879-.283a.776.776 0 0 0-.932-.122l-2.696 1.174a.233.233 0 0 0-.076.382c1.5 1.478 3.534 2.27 5.674 1.976 1.27-.178 2.502-.718 3.396-1.7Z" />
              </g>
            </svg>
            @if (u.blog) {
              <a [href]="u.blog.startsWith('http') ? u.blog : 'https://' + u.blog" target="_blank" class="text-neutral-500 dark:text-neutral-0 hover:underline truncate">
                {{ formatBlog(u.blog) }}
              </a>
            } @else {
              <span class="text-neutral-500 dark:text-neutral-0">Not Available</span>
            }
          </div>
          <!-- Company -->
          <div class="flex items-center gap-3" [class.opacity-50]="!u.company">
            <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" class="shrink-0">
              <g fill="currentColor" class="text-neutral-500 dark:text-neutral-0">
                <path d="M10.858 1.558L1.7.167A1.477 1.477 0 0 0 .517.886 1.4 1.4 0 0 0 0 1.948v16.644a1.4 1.4 0 0 0 1.4 1.4h3.564v-3.381H6.97v3.38h9.63a1.4 1.4 0 0 0 1.4-1.4V5.39a1.46 1.46 0 0 0-1.143-1.432l-6-1.4ZM4.583 14.2H2.8v-1.785h1.783V14.2Zm0-3.564H2.8V8.852h1.783v1.784Zm0-3.564H2.8V5.288h1.783v1.784ZM8.744 14.2H6.961v-1.785h1.783V14.2Zm0-3.564H6.961V8.852h1.783v1.784Zm0-3.564H6.961V5.288h1.783v1.784ZM12.906 14.2h-1.784v-1.785h1.784V14.2Zm0-3.564h-1.784V8.852h1.784v1.784Zm0-3.564h-1.784V5.288h1.784v1.784Z" />
              </g>
            </svg>
            <span class="text-neutral-500 dark:text-neutral-0">{{ u.company || 'Not Available' }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Mobile: bio, stats, links -->
    <div class="md:hidden">
      <!-- Bio -->
      <p class="text-neutral-500 dark:text-neutral-0 text-[13px] leading-[25px]"
        [class.opacity-50]="!u.bio"
      >
        {{ u.bio || 'This profile has no bio' }}
      </p>

      <!-- Stats (stacked vertically) -->
      <div class="flex flex-col bg-neutral-100 dark:bg-neutral-900 rounded-xl mt-6 py-4 px-6 gap-4">
        <div>
          <p class="text-neutral-500 dark:text-neutral-0 text-[11px]">Repos</p>
          <p class="text-neutral-700 dark:text-neutral-0 text-[16px] font-bold">{{ u.public_repos }}</p>
        </div>
        <div>
          <p class="text-neutral-500 dark:text-neutral-0 text-[11px]">Followers</p>
          <p class="text-neutral-700 dark:text-neutral-0 text-[16px] font-bold">{{ u.followers }}</p>
        </div>
        <div>
          <p class="text-neutral-500 dark:text-neutral-0 text-[11px]">Following</p>
          <p class="text-neutral-700 dark:text-neutral-0 text-[16px] font-bold">{{ u.following }}</p>
        </div>
      </div>

      <!-- Links (single column) -->
      <div class="flex flex-col gap-4 mt-6 text-[13px]">
        <div class="flex items-center gap-3" [class.opacity-50]="!u.location">
          <svg width="14" height="20" xmlns="http://www.w3.org/2000/svg" class="shrink-0">
            <path d="M7.731.343a4.748 4.748 0 0 0-3.945 2.049 4.91 4.91 0 0 0-.588 4.39L6.884 15.9a.881.881 0 0 0 1.57 0l3.685-9.119a4.91 4.91 0 0 0-.588-4.39A4.748 4.748 0 0 0 7.731.344ZM7.67 8.559a2.09 2.09 0 1 1 0-4.18 2.09 2.09 0 0 1 0 4.18Z" fill="currentColor" class="text-neutral-500 dark:text-neutral-0" />
          </svg>
          <span class="text-neutral-500 dark:text-neutral-0">{{ u.location || 'Not Available' }}</span>
        </div>
        <div class="flex items-center gap-3" [class.opacity-50]="!u.twitter_username">
          <svg width="20" height="18" xmlns="http://www.w3.org/2000/svg" class="shrink-0">
            <path d="M20 2.799a8.549 8.549 0 0 1-2.363.647 4.077 4.077 0 0 0 1.804-2.266 8.194 8.194 0 0 1-2.6.993A4.099 4.099 0 0 0 9.75 4.977c0 .324.027.637.095.934-3.409-.166-6.425-1.8-8.452-4.288a4.128 4.128 0 0 0-.56 2.072c0 1.42.737 2.679 1.838 3.407a4.05 4.05 0 0 1-1.857-.509v.046a4.119 4.119 0 0 0 3.285 4.028 4.092 4.092 0 0 1-1.075.135c-.263 0-.528-.015-.776-.07.531 1.624 2.038 2.818 3.831 2.857A8.239 8.239 0 0 1 0 15.86a11.463 11.463 0 0 0 6.29 1.846c7.545 0 11.67-6.25 11.67-11.667 0-.182-.006-.357-.015-.53A8.18 8.18 0 0 0 20 3.369l-.003-.57h.003Z" fill="currentColor" class="text-neutral-500 dark:text-neutral-0" />
          </svg>
          <span class="text-neutral-500 dark:text-neutral-0">{{ u.twitter_username || 'Not Available' }}</span>
        </div>
        <div class="flex items-center gap-3" [class.opacity-50]="!u.blog">
          <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" class="shrink-0">
            <g fill="currentColor" class="text-neutral-500 dark:text-neutral-0">
              <path d="M7.404 5.012c-2.355 2.437-1.841 6.482.857 8.273.089.06.207.048.283-.027.568-.555 1.049-1.093 1.47-1.776a.213.213 0 0 0-.084-.3A2.743 2.743 0 0 1 8.878 10.1a2.64 2.64 0 0 1-.223-1.803c.168-.638.57-1.163 1.078-1.56.348-.272.752-.468 1.158-.597.893-.271 1.325-.065 1.879.283.288.18.621.257.932.122l2.696-1.174a.233.233 0 0 0 .076-.382c-1.5-1.478-3.534-2.27-5.674-1.976-1.27.178-2.502.718-3.396 1.7Z" />
              <path d="M12.596 14.988c2.355-2.437 1.841-6.482-.857-8.273a.212.212 0 0 0-.283.027c-.568.555-1.049 1.093-1.47 1.776a.213.213 0 0 0 .084.3 2.74 2.74 0 0 1 1.052 1.082c.26.463.345.992.223 1.803-.168.638-.57 1.163-1.078 1.56a3.34 3.34 0 0 1-1.158.597c-.893.271-1.325.065-1.879-.283a.776.776 0 0 0-.932-.122l-2.696 1.174a.233.233 0 0 0-.076.382c1.5 1.478 3.534 2.27 5.674 1.976 1.27-.178 2.502-.718 3.396-1.7Z" />
            </g>
          </svg>
          @if (u.blog) {
            <a [href]="u.blog.startsWith('http') ? u.blog : 'https://' + u.blog" target="_blank" class="text-neutral-500 dark:text-neutral-0 hover:underline truncate">
              {{ formatBlog(u.blog) }}
            </a>
          } @else {
            <span class="text-neutral-500 dark:text-neutral-0">Not Available</span>
          }
        </div>
        <div class="flex items-center gap-3" [class.opacity-50]="!u.company">
          <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" class="shrink-0">
            <g fill="currentColor" class="text-neutral-500 dark:text-neutral-0">
              <path d="M10.858 1.558L1.7.167A1.477 1.477 0 0 0 .517.886 1.4 1.4 0 0 0 0 1.948v16.644a1.4 1.4 0 0 0 1.4 1.4h3.564v-3.381H6.97v3.38h9.63a1.4 1.4 0 0 0 1.4-1.4V5.39a1.46 1.46 0 0 0-1.143-1.432l-6-1.4ZM4.583 14.2H2.8v-1.785h1.783V14.2Zm0-3.564H2.8V8.852h1.783v1.784Zm0-3.564H2.8V5.288h1.783v1.784ZM8.744 14.2H6.961v-1.785h1.783V14.2Zm0-3.564H6.961V8.852h1.783v1.784Zm0-3.564H6.961V5.288h1.783v1.784ZM12.906 14.2h-1.784v-1.785h1.784V14.2Zm0-3.564h-1.784V8.852h1.784v1.784Zm0-3.564h-1.784V5.288h1.784v1.784Z" />
            </g>
          </svg>
          <span class="text-neutral-500 dark:text-neutral-0">{{ u.company || 'Not Available' }}</span>
        </div>
      </div>
    </div>
  </div>
}
